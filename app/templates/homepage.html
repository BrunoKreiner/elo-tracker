{% extends "base.html" %}

{% block content %}


<div class="w3-main" style="margin-left:300px;"></div>

<header class="w3-container w3-center" style="padding-top:50px">
  <meta id="my-data" data-name="{{matchesPlayed}}">
  <h2><b><i class="fa fa-dashboard"></i> My Dashboard</b></h2>
</header>

<div class="w3-container w3-hover-text-light-grey w3-teal w3-center" style="border-radius:25px;height:230px;margin-left:3%;margin-right:3%;margin-top:3%;width:44%;padding:2%;float:left;">
  <h2 style="margin:15px;">Elo Stats</h2>
  {% block msg9 %}
    {% if maxEloActivity=='No matches played' %}
      <h5 style="margin:15px;">
        No matches played
      </h5>
    {% else %}
      <h5 style="margin:15px;">
        Max Elo: <strong class="w3-text-yellow">{{maxElo}}</strong> in {{maxEloActivity}}
      </h5>
      <h5 style="margin:15px;">
        Min Elo: <strong class="w3-text-yellow">{{minElo}}</strong> in {{minEloActivity}}
      </h5>
      <h5 style="margin:15px;">
        Avg Elo: <strong class="w3-text-yellow">{{averageElo}}</strong> over all activities
      </h5>
    {% endif %}
  {% endblock %}

</div>

<div class="w3-container w3-center w3-teal" style="border-radius:25px;height:230px;margin-left:3%;margin-right:3%;margin-top:3%;width:44%;padding:2%;float:left;">
  <h2 style="margin:15px;">Elo Lookup</h2>
  <p>
    <!---<input type="text" id="activitySearch" placeholder="Activity"style="border-radius:10px;">
    <button type="submit" style="border-radius:10px;"><i class="fa fa-search"></i></button>--->
    <h4 style="margin:20px;">
      Elo:  <strong class="w3-text-yellow">{{eloLookup}}</strong>
    </h4>
    <form action="" method="post">
      {{ form.hidden_tag() }}
      <p style="font-size:medium;">
        {{ form.activity(size=25,placeholder="Activity") }}
        {% for error in form.activity.errors %}
        <span style="color: red;">[{{ error }}]</span>
        {% endfor %}
      {{ form.submit(class_="w3-light-grey w3-hover-text-dark-grey") }}</p>
    </form>
  </p>
</div>



<div class="w3-container" style="padding-top:22px">
  <div class="w3-row-padding w3-margin-bottom" style="margin-top:3%;">
    <div class="w3-quarter">
      <div class="w3-container w3-red w3-padding-16" style="border-radius:25px;">
        <div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{numLeagues}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4># Leagues Joined</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-green w3-padding-16" style="border-radius:25px;">
        <div class="w3-left"><i class="fa fa-line-chart w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{numActivities}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Activities Played</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-blue w3-padding-16" style="border-radius:25px;">
        <div class="w3-left"><i class="fa fa-trophy w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{matchesWon}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Matches Won</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-deep-orange w3-text-white w3-padding-16" style="border-radius:25px;">
        <div class="w3-left"><i class="fa fa-gamepad w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{matchesPlayed}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Matches Played</h4>
      </div>
    </div>
  </div>

  <div class="w3-container w3-center w3-light-grey" style="width:91%;margin-left:4.5%;margin-bottom:3%;margin-top:3%;float:left;">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
      <canvas id="myChart"></canvas>

      <script type="text/javascript">
        var xValues = $('#my-data').data();
        console.log(xValues);
        //var xValues = [50,60,70,80,90,100,110,120,130,140,150];
        var yValues = [7,8,8,9,9,9,10,11,14,14,15];
        
        new Chart("myChart", {
          type: "line",
          data: {
            labels: xValues,
            datasets: [{
              fill: false,
              lineTension: 0,
              backgroundColor: "rgba(0,0,255,1.0)",
              borderColor: "rgba(0,0,255,0.1)",
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            scales: {
              yAxes: [{ticks: {min: 6, max:16}}],
            }
          }
        });
        </script>
    
  </div>

  <div class="w3-container w3-hover-text-light-grey w3-deep-purple w3-center" style="border-radius:25px;height:240px;margin:3%;width:44%;padding:2%;float:left;">
    <h2 style="margin:15px;">My Profile</h2>
    <p>
      {% block msg3 %}
        {% if current_user.is_authenticated %}
          Name: {{current_user.name}}  <a href="{{ url_for('rankables.updateName') }}" class = "w3-hover-white" style ="color:white;"><i class="fa fa-pencil-square-o fa-fw"></i></a>
        {% endif %}
      {% endblock %}
    </p>
    <p>
      {% block msg5 %}
        {% if current_user.is_authenticated %}
          Category: {{current_user.category}}  <a href="{{ url_for('rankables.updateCategory') }}" class = "w3-hover-white" style ="color:white;"><i class="fa fa-pencil-square-o fa-fw"></i></a>
        {% endif %}
      {% endblock %}
    </p>
    <p>
      {% block msg6 %}
        {% if current_user.is_authenticated %}
          Email: {{current_user.email}}  <a href="{{ url_for('rankables.updateEmail') }}" class = "w3-hover-white" style ="color:white;"><i class="fa fa-pencil-square-o fa-fw"></i></a>
        {% endif %}
      {% endblock %}
    </p>
  </div>

  <div class="w3-container w3-center w3-deep-purple" style="height:240px;margin:3%;width:44%;border-radius:25px;padding:3%;float:left;">
    <h2 style="margin:15px;">About Me</h2>
    <p>
      {% block msg4 %}
        {% if current_user.is_authenticated %}
          {{current_user.about}}  <a href="{{ url_for('rankables.updateAbout') }}" class = "w3-hover-white" style ="color:white;"><i class="fa fa-pencil-square-o fa-fw"></i></a>
        {% endif %}
      {% endblock %}
    </p>
    <a href="{{ url_for('rankables.updatePassword') }}" ><p class="w3-pink w3-button w3-center" style="border-radius:15px;height:40px;width:175px;" class = "w3-hover-white">
      Change password
    </p></a>
  </div>
</div>

{% endblock %}
